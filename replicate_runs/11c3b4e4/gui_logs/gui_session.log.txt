=== GUI SESSION LOG: 2025-09-03 14:36:45 ===
🚀 Версия: v4.4.61
🔐 Хеш: 11c3b4e4
📁 Папка: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/gui_logs
============================================================


============================================================
ЛОГИ ДО ОПРЕДЕЛЕНИЯ ВЕРСИИ:
============================================================
=== TEMP GUI SESSION LOG: 2025-09-03 14:36:45 ===
🚀 Версия: определяем...
🔐 Хеш: определяем...
📁 Временная папка: /home/papaandrey/plitka-pro-project/replicate_runs/temp_logs
============================================================

[2025-09-03 14:36:45] 🚀 Plitka Pro unknown запущен
[2025-09-03 14:36:45] 🔐 Хеш папки: unknown
[2025-09-03 14:36:45] 📁 Ожидаемая структура: replicate_runs/unknown/run_YYYYMMDD_HHMMSS/
[2025-09-03 14:36:45] 🔍 Рабочий каталог: /home/papaandrey/plitka-pro-project
[2025-09-03 14:36:45] ============================================================
[2025-09-03 14:36:45] 🔄 Версия обновлена: v4.4.61
[2025-09-03 14:36:45] ✅ Новый хеш (гибридный): 11c3b4e4
[2025-09-03 14:36:45] 🔍 Валидация пресетов для новой версии...
[2025-09-03 14:36:45] 📊 Результат валидации: 8/8 пресетов корректны
[2025-09-03 14:36:45] ✅ Логи перемещены из временной папки
[2025-09-03 14:36:45] 📁 Логи GUI: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/gui_logs
[2025-09-03 14:36:47] 📋 Выбран пресет: basic_single_color ✅
[2025-09-03 14:36:48] 📋 Выбрано пресетов: 8
[2025-09-03 14:36:48]   • basic_single_color
[2025-09-03 14:36:48]   • basic_two_colors
[2025-09-03 14:36:48]   • basic_three_colors
[2025-09-03 14:36:48]   • basic_four_colors
[2025-09-03 14:36:48]   • basic_quality_test
[2025-09-03 14:36:48]   • basic_legacy_compatibility
[2025-09-03 14:36:48]   • basic_edge_case_minimal
[2025-09-03 14:36:48]   • basic_edge_case_balanced
[2025-09-03 14:36:49] 🔄 on_start() вызван
[2025-09-03 14:36:49] 
[GUI] Starting tests...
[2025-09-03 14:36:49] 🚀 Запуск с версией: v4.4.61
[2025-09-03 14:36:49] 🔐 Хеш папки: 11c3b4e4
[2025-09-03 14:36:49] 📁 Ожидаемая папка: replicate_runs/11c3b4e4/
[2025-09-03 14:36:49] 🔍 Текущий рабочий каталог: /home/papaandrey/plitka-pro-project
[2025-09-03 14:36:49] 📁 Полный путь: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4
[2025-09-03 14:36:49] 📁 Абсолютный путь: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4
[2025-09-03 14:36:49] --------------------------------------------------
[2025-09-03 14:36:49] 🔄 run_presets() вызван
[2025-09-03 14:36:49] 
################ PRESET: basic_single_color ################
[2025-09-03 14:36:49] 🔄 _run_single() вызван
[2025-09-03 14:36:49] 
=== Creating prediction: nauslava/plitka-pro-project (version: v4.4.61)
Inputs: {"prompt": "100% red", "seed": 12345, "steps": 20, "guidance": 7.0, "lora_scale": 0.7, "use_controlnet": false, "description": "Тест 1 цвета - простой случай, базовые параметры"}
[2025-09-03 14:36:49] 🔄 Worker.start() вызван, поток запущен
[2025-09-03 14:36:50] 🔄 Получение модели: nauslava/plitka-pro-project
[2025-09-03 14:36:51] ✅ Модель получена
[2025-09-03 14:36:51] 🔄 Получение версии модели...
[2025-09-03 14:36:51] ✅ Версия получена: 11c3b4e4dec5e76ea6fa1d7d3c5435fd07c5053ea2e9c4033433939e6d07a295
[2025-09-03 14:36:51] 🔄 Создание предсказания...
[2025-09-03 14:36:52] ✅ Предсказание создано: efyx9cm8b9rg80cs1xesxsv2zw
[2025-09-03 14:36:52] Prediction id: efyx9cm8b9rg80cs1xesxsv2zw
[2025-09-03 14:36:52] 🔍 Начинаем создание папки для результатов...
[2025-09-03 14:36:52] 🔍 Текущий рабочий каталог: /home/papaandrey/plitka-pro-project
[2025-09-03 14:36:52] 🔍 Используем версию и хеш из App:
[2025-09-03 14:36:52] 🔍 version_id: v4.4.61
[2025-09-03 14:36:52] 🔍 pred.version: 11c3b4e4dec5e76ea6fa1d7d3c5435fd07c5053ea2e9c4033433939e6d07a295
[2025-09-03 14:36:52] 🔍 ver_for_hash: v4.4.61
[2025-09-03 14:36:52] 🔐 Хеш из App: 11c3b4e4
[2025-09-03 14:36:52] 🔄 Папка создана: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_143652
[2025-09-03 14:36:52] 🔄 _current_run_dir установлен: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_143652
[2025-09-03 14:36:52] 🔐 Создаем папку с хешем: 11c3b4e4
[2025-09-03 14:36:52] 📁 Создана папка: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_143652
[2025-09-03 14:36:52] 🔐 Хеш версии: 11c3b4e4
[2025-09-03 14:36:52] 🔍 Базовая папка: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4
[2025-09-03 14:36:52] 🔍 Полный путь: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_143652
[2025-09-03 14:36:52] ✅ Папка успешно создана и существует
[2025-09-03 14:41:01] INFO:coglet:prediction started: id=efyx9cm8b9rg80cs1xesxsv2zw
WARNING unknown input field ignored: description
[2025-09-03 14:41:01] 
✅ Startup phase completed. Proceeding to completion...
[2025-09-03 14:41:07] INFO:predict:🚀 STARTUP_SNAPSHOT_START
INFO:predict:🧭 MODEL_START v4.4.61 | device=cuda | diffusers=0.21.4 | torch=2.1.0+cu121
INFO:predict:📊 GPU: Tesla T4
INFO:predict:💾 GPU Memory: 14.6 GB
INFO:predict:🔧 SDXL Base: unknown
INFO:predict:🎨 LoRA: unknown (rank: 32)
INFO:predict:🔤 TI: unknown (tokens: <s0><s1>)
INFO:predict:⚙️ Scheduler: DPMSolverMultistepScheduler
INFO:predict:🎭 VAE: AutoencoderKL
INFO:predict:🎯 Prompt: 100% red
INFO:predict:🚫 Negative Prompt: None
INFO:predict:🎲 Seed: 12345
INFO:predict:📊 Steps: 20 (базовый)
INFO:predict:🎚️ Guidance: 7.0 (базовый)
INFO:predict:🔧 LoRA Scale: 0.7 (базовый)
INFO:predict:🎨 Адаптивные параметры будут рассчитаны на основе количества цветов
INFO:predict:🚀 STARTUP_SNAPSHOT_END
INFO:predict:🎨 Начало генерации изображения...
INFO:predict:📝 Входной промпт: 100% red
INFO:predict:🚫 Входной негативный промпт: None
INFO:predict:🎲 Входной сид: 12345
INFO:predict:🔧 Установлен стандартный негативный промпт: object, text, watermark, logo, signature, blur, blurry, low quality, distorted, mosaic, checkerboard, grid, patchwork, tiled, seams
INFO:predict:🎨 Генерация изображения...
INFO:predict:📝 Полный промпт: ohwx_rubber_tile <s0><s1>, 100% red, photorealistic rubber tile, high quality, detailed texture, professional photography, sharp focus
INFO:predict:🚫 Финальный негативный промпт: object, text, watermark, logo, signature, blur, blurry, low quality, distorted, mosaic, checkerboard, grid, patchwork, tiled, seams
INFO:predict:🎲 Финальный сид: 12345
INFO:predict:🔧 Устройство: cuda
INFO:predict:🎨 Анализ сложности промпта для адаптивных параметров...
INFO:predict:🎨 Обнаружено цветов в промпте: 1
INFO:predict:🎯 Адаптивные параметры для 1 цвета: steps=20, guidance=7.0
INFO:predict:🚀 Запуск pipeline для генерации с адаптивными параметрами...
INFO:predict:🚀 Финальный сегмент: единый проход без callback

  0%|          | 0/20 [00:00<?, ?it/s]
  5%|▌         | 1/20 [00:03<01:10,  3.72s/it]
 10%|█         | 2/20 [00:04<00:37,  2.10s/it]
[2025-09-03 14:41:13]  15%|█▌        | 3/20 [00:05<00:26,  1.59s/it]
 20%|██        | 4/20 [00:06<00:21,  1.34s/it]
 25%|██▌       | 5/20 [00:07<00:18,  1.21s/it]
 30%|███       | 6/20 [00:08<00:15,  1.13s/it]
 35%|███▌      | 7/20 [00:09<00:14,  1.09s/it]
 40%|████      | 8/20 [00:10<00:12,  1.06s/it]
[2025-09-03 14:41:20]  45%|████▌     | 9/20 [00:11<00:11,  1.04s/it]
 50%|█████     | 10/20 [00:12<00:10,  1.03s/it]
 55%|█████▌    | 11/20 [00:13<00:09,  1.02s/it]
 60%|██████    | 12/20 [00:14<00:08,  1.02s/it]
 65%|██████▌   | 13/20 [00:15<00:07,  1.02s/it]
 70%|███████   | 14/20 [00:16<00:06,  1.02s/it]
[2025-09-03 14:41:26]  75%|███████▌  | 15/20 [00:17<00:05,  1.02s/it]
 80%|████████  | 16/20 [00:18<00:04,  1.03s/it]
 85%|████████▌ | 17/20 [00:19<00:03,  1.03s/it]
 90%|█████████ | 18/20 [00:20<00:02,  1.03s/it]
 95%|█████████▌| 19/20 [00:21<00:01,  1.04s/it]
[2025-09-03 14:41:59] 100%|██████████| 20/20 [00:22<00:00,  1.04s/it]
100%|██████████| 20/20 [00:22<00:00,  1.14s/it]
INFO:predict:✅ Финальная генерация завершена
INFO:predict:📊 Размер сгенерированного изображения: (1024, 1024)
INFO:predict:✅ FINAL_READY /tmp/final.png
INFO:predict:🎨 Создание colormap: 1 цветов, паттерн: random, гранулы: medium
INFO:predict:✅ Оптимизированный colormap создан: (1024, 1024)
INFO:predict:📊 Статистика паттернов: {'random': 1, 'grid': 0, 'radial': 0, 'granular': 0}
INFO:predict:📊 Статистика размеров гранул: {'small': 0, 'medium': 1, 'large': 0}
ERROR:predict:❌ Ошибка валидации colormap: operands could not be broadcast together with shapes (1024,1024,4) (3,) 
WARNING:predict:⚠️ Colormap не соответствует промпту, пересоздаем...
INFO:predict:🔧 Принудительная пересборка colormap...
INFO:predict:✅ Colormap пересобран для цветов: ['red']
INFO:predict:🎨 ОПТИМИЗИРОВАННЫЙ COLORMAP_READY /tmp/colormap.png
INFO:predict:📊 Размер colormap: (1024, 1024)
INFO:predict:📋 ЛЕГЕНДА_READY /tmp/legend.png
INFO:predict:🧹 Память очищена
INFO:predict:📄 JSON_READY /tmp/generation_data.json
INFO:predict:✅ Изображение успешно сгенерировано!
INFO:predict:📊 Color Grid Adapter статистика:
INFO:predict:   - Всего генераций: 1
INFO:predict:   - ControlNet использован: 0 (0.0%)
INFO:predict:   - Популярный паттерн: random
INFO:predict:   - Популярный размер гранул: medium
INFO:coglet:prediction completed: id=efyx9cm8b9rg80cs1xesxsv2zw
[2025-09-03 14:41:59] 🔄 Загрузка изображения 0: https://replicate.delivery/czjl/36BBskBNBvqECFKGM3aGzCaBvI6cF3xnywG6JlF1oWthbXUF/final.png
[2025-09-03 14:42:00] ✅ Изображение сохранено: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_143652/out_0.png
[2025-09-03 14:42:00] 🔄 Загрузка изображения 1: https://replicate.delivery/czjl/F4ujI5Gub9qtG9UIBHeNPZownsbUISkkiaT04RDcu6RD3uoKA/colormap.png
[2025-09-03 14:42:00] ✅ Изображение сохранено: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_143652/out_1.png
[2025-09-03 14:42:00] 🔄 Загрузка изображения 2: https://replicate.delivery/czjl/xcUOISSZ8gJUMBtS1W3ewfDPDmBWZ9vWm6v3Nn6uE0UGudRVA/legend.png
[2025-09-03 14:42:01] ✅ Изображение сохранено: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_143652/out_2.png
[2025-09-03 14:42:01] 
=== Final status: succeeded
[2025-09-03 14:42:01] [
  "https://replicate.delivery/czjl/36BBskBNBvqECFKGM3aGzCaBvI6cF3xnywG6JlF1oWthbXUF/final.png",
  "https://replicate.delivery/czjl/F4ujI5Gub9qtG9UIBHeNPZownsbUISkkiaT04RDcu6RD3uoKA/colormap.png",
  "https://replicate.delivery/czjl/xcUOISSZ8gJUMBtS1W3ewfDPDmBWZ9vWm6v3Nn6uE0UGudRVA/legend.png"
]
[2025-09-03 14:42:01] 🔄 _save_outputs вызван
[2025-09-03 14:42:01] 💾 Сохраняем результаты в папку: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_143652
[2025-09-03 14:42:01] 🔐 ПРИНУДИТЕЛЬНО используем хеш: 89fdd926
[2025-09-03 14:42:01] ✅ Используем подготовленную папку: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_143652
[2025-09-03 14:42:01] 🔄 Начинаем обработку 3 выходных файлов...
[2025-09-03 14:42:01] 📁 Папка для сохранения: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_143652
[2025-09-03 14:42:02] 📥 Скачан файл 0: out_0.png
[2025-09-03 14:42:02] 📥 Скачан файл 1: out_1.png
[2025-09-03 14:42:02] 📥 Скачан файл 2: out_2.png
[2025-09-03 14:42:02] 📁 Найдено файлов для переименования: 3
[2025-09-03 14:42:02] 📝 Промпт для именования: '100pct_red'
[2025-09-03 14:42:02] ⏰ Временная метка из папки: 20250903_143652
[2025-09-03 14:42:02] 🔐 Используем хеш из App: 11c3b4e4
[2025-09-03 14:42:02] ✅ FINAL saved as: 20250903_143652_100pct_red_final_11c3b4e4.png
[2025-09-03 14:42:02] 📁 Путь: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_143652/20250903_143652_100pct_red_final_11c3b4e4.png
[2025-09-03 14:42:02] 🎨 COLORMAP saved as: 20250903_143652_100pct_red_colormap_11c3b4e4.png
[2025-09-03 14:42:02] 📁 Путь: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_143652/20250903_143652_100pct_red_colormap_11c3b4e4.png
[2025-09-03 14:42:02] 
################ PRESET: basic_two_colors ################
[2025-09-03 14:42:02] 🔄 _run_single() вызван
[2025-09-03 14:42:02] 
=== Creating prediction: nauslava/plitka-pro-project (version: 11c3b4e4dec5e76ea6fa1d7d3c5435fd07c5053ea2e9c4033433939e6d07a295)
Inputs: {"prompt": "60% red, 40% white", "seed": 12345, "steps": 25, "guidance": 7.5, "lora_scale": 0.7, "use_controlnet": false, "description": "Тест 2 цветов - средняя сложность, базовые параметры"}
[2025-09-03 14:42:03] Prediction id: 08zwjtt78srga0cs1xh9tr6scm
[2025-09-03 14:42:03] 🔍 Начинаем создание папки для результатов...
[2025-09-03 14:42:03] 🔍 Текущий рабочий каталог: /home/papaandrey/plitka-pro-project
[2025-09-03 14:42:03] 🔍 Используем версию и хеш из App:
[2025-09-03 14:42:03] 🔍 version_id: 11c3b4e4dec5e76ea6fa1d7d3c5435fd07c5053ea2e9c4033433939e6d07a295
[2025-09-03 14:42:03] 🔍 pred.version: 11c3b4e4dec5e76ea6fa1d7d3c5435fd07c5053ea2e9c4033433939e6d07a295
[2025-09-03 14:42:03] 🔍 ver_for_hash: v4.4.61
[2025-09-03 14:42:03] 🔐 Хеш из App: 11c3b4e4
[2025-09-03 14:42:03] 🔄 Папка создана: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144203
[2025-09-03 14:42:03] 🔄 _current_run_dir установлен: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144203
[2025-09-03 14:42:03] 🔐 Создаем папку с хешем: 11c3b4e4
[2025-09-03 14:42:03] 📁 Создана папка: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144203
[2025-09-03 14:42:03] 🔐 Хеш версии: 11c3b4e4
[2025-09-03 14:42:03] 🔍 Базовая папка: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4
[2025-09-03 14:42:03] 🔍 Полный путь: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144203
[2025-09-03 14:42:03] ✅ Папка успешно создана и существует
[2025-09-03 14:42:03] INFO:coglet:prediction started: id=08zwjtt78srga0cs1xh9tr6scm
WARNING unknown input field ignored: description
INFO:predict:🚀 STARTUP_SNAPSHOT_START
INFO:predict:🧭 MODEL_START v4.4.61 | device=cuda | diffusers=0.21.4 | torch=2.1.0+cu121
INFO:predict:📊 GPU: Tesla T4
INFO:predict:💾 GPU Memory: 14.6 GB
INFO:predict:🔧 SDXL Base: unknown
INFO:predict:🎨 LoRA: unknown (rank: 32)
INFO:predict:🔤 TI: unknown (tokens: <s0><s1>)
INFO:predict:⚙️ Scheduler: DPMSolverMultistepScheduler
INFO:predict:🎭 VAE: AutoencoderKL
INFO:predict:🎯 Prompt: 60% red, 40% white
INFO:predict:🚫 Negative Prompt: None
INFO:predict:🎲 Seed: 12345
INFO:predict:📊 Steps: 25 (базовый)
INFO:predict:🎚️ Guidance: 7.5 (базовый)
INFO:predict:🔧 LoRA Scale: 0.7 (базовый)
INFO:predict:🎨 Адаптивные параметры будут рассчитаны на основе количества цветов
INFO:predict:🚀 STARTUP_SNAPSHOT_END
INFO:predict:🎨 Начало генерации изображения...
INFO:predict:📝 Входной промпт: 60% red, 40% white
INFO:predict:🚫 Входной негативный промпт: None
INFO:predict:🎲 Входной сид: 12345
INFO:predict:🔧 Установлен стандартный негативный промпт: object, text, watermark, logo, signature, blur, blurry, low quality, distorted, mosaic, checkerboard, grid, patchwork, tiled, seams
INFO:predict:🎨 Генерация изображения...
INFO:predict:📝 Полный промпт: ohwx_rubber_tile <s0><s1>, 60% red, 40% white, photorealistic rubber tile, high quality, detailed texture, professional photography, sharp focus
INFO:predict:🚫 Финальный негативный промпт: object, text, watermark, logo, signature, blur, blurry, low quality, distorted, mosaic, checkerboard, grid, patchwork, tiled, seams
INFO:predict:🎲 Финальный сид: 12345
INFO:predict:🔧 Устройство: cuda
INFO:predict:🎨 Анализ сложности промпта для адаптивных параметров...
INFO:predict:🎨 Обнаружено цветов в промпте: 2
INFO:predict:🎯 Адаптивные параметры для 2 цветов: steps=25, guidance=7.5
INFO:predict:🚀 Запуск pipeline для генерации с адаптивными параметрами...
ERROR:predict:❌ Ошибка генерации: 'Predictor' object has no attribute 'select_optimal_controlnet'
ERROR:predict:📊 Тип ошибки: AttributeError
ERROR:predict:📊 Детали ошибки: 'Predictor' object has no attribute 'select_optimal_controlnet'
Traceback (most recent call last):
  File "/root/.pyenv/versions/3.11.13/lib/python3.11/site-packages/coglet/file_runner.py", line 218, in _predict
    async for o in self.runner.predict_iter(req_in):
  File "/root/.pyenv/versions/3.11.13/lib/python3.11/site-packages/coglet/runner.py", line 150, in predict_iter
    for x in self.predictor.predict(**kwargs):
  File "/src/predict.py", line 1262, in predict
    raise e
  File "/src/predict.py", line 1063, in predict
    selected_controlnets = self.select_optimal_controlnet(color_count)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Predictor' object has no attribute 'select_optimal_controlnet'
ERROR:coglet:prediction failed: id=08zwjtt78srga0cs1xh9tr6scm 'Predictor' object has no attribute 'select_optimal_controlnet'
Traceback (most recent call last):
  File "/root/.pyenv/versions/3.11.13/lib/python3.11/site-packages/coglet/file_runner.py", line 218, in _predict
    async for o in self.runner.predict_iter(req_in):
  File "/root/.pyenv/versions/3.11.13/lib/python3.11/site-packages/coglet/runner.py", line 150, in predict_iter
    for x in self.predictor.predict(**kwargs):
  File "/src/predict.py", line 1262, in predict
    raise e
  File "/src/predict.py", line 1063, in predict
    selected_controlnets = self.select_optimal_controlnet(color_count)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Predictor' object has no attribute 'select_optimal_controlnet'
[2025-09-03 14:42:03] 
❌ Boot error detected before startup completed. Cancelling prediction...
[2025-09-03 14:42:03] 
################ PRESET: basic_three_colors ################
[2025-09-03 14:42:03] 🔄 _run_single() вызван
[2025-09-03 14:42:03] 
=== Creating prediction: nauslava/plitka-pro-project (version: 11c3b4e4dec5e76ea6fa1d7d3c5435fd07c5053ea2e9c4033433939e6d07a295)
Inputs: {"prompt": "50% red, 30% black, 20% white", "seed": 12345, "steps": 30, "guidance": 8.0, "lora_scale": 0.7, "use_controlnet": false, "description": "Тест 3 цветов - высокая сложность, базовые параметры"}
[2025-09-03 14:42:04] Prediction id: qr6ydt2b2drge0cs1xh8kdfr4w
[2025-09-03 14:42:04] 🔍 Начинаем создание папки для результатов...
[2025-09-03 14:42:04] 🔍 Текущий рабочий каталог: /home/papaandrey/plitka-pro-project
[2025-09-03 14:42:04] 🔍 Используем версию и хеш из App:
[2025-09-03 14:42:04] 🔍 version_id: 11c3b4e4dec5e76ea6fa1d7d3c5435fd07c5053ea2e9c4033433939e6d07a295
[2025-09-03 14:42:04] 🔍 pred.version: 11c3b4e4dec5e76ea6fa1d7d3c5435fd07c5053ea2e9c4033433939e6d07a295
[2025-09-03 14:42:04] 🔍 ver_for_hash: v4.4.61
[2025-09-03 14:42:04] 🔐 Хеш из App: 11c3b4e4
[2025-09-03 14:42:04] 🔄 Папка создана: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144204
[2025-09-03 14:42:04] 🔄 _current_run_dir установлен: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144204
[2025-09-03 14:42:04] 🔐 Создаем папку с хешем: 11c3b4e4
[2025-09-03 14:42:04] 📁 Создана папка: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144204
[2025-09-03 14:42:04] 🔐 Хеш версии: 11c3b4e4
[2025-09-03 14:42:04] 🔍 Базовая папка: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4
[2025-09-03 14:42:04] 🔍 Полный путь: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144204
[2025-09-03 14:42:04] ✅ Папка успешно создана и существует
[2025-09-03 14:42:04] INFO:coglet:prediction started: id=qr6ydt2b2drge0cs1xh8kdfr4w
WARNING unknown input field ignored: description
INFO:predict:🚀 STARTUP_SNAPSHOT_START
INFO:predict:🧭 MODEL_START v4.4.61 | device=cuda | diffusers=0.21.4 | torch=2.1.0+cu121
INFO:predict:📊 GPU: Tesla T4
INFO:predict:💾 GPU Memory: 14.6 GB
INFO:predict:🔧 SDXL Base: unknown
INFO:predict:🎨 LoRA: unknown (rank: 32)
INFO:predict:🔤 TI: unknown (tokens: <s0><s1>)
INFO:predict:⚙️ Scheduler: DPMSolverMultistepScheduler
INFO:predict:🎭 VAE: AutoencoderKL
INFO:predict:🎯 Prompt: 50% red, 30% black, 20% white
INFO:predict:🚫 Negative Prompt: None
INFO:predict:🎲 Seed: 12345
INFO:predict:📊 Steps: 30 (базовый)
INFO:predict:🎚️ Guidance: 8.0 (базовый)
INFO:predict:🔧 LoRA Scale: 0.7 (базовый)
INFO:predict:🎨 Адаптивные параметры будут рассчитаны на основе количества цветов
INFO:predict:🚀 STARTUP_SNAPSHOT_END
INFO:predict:🎨 Начало генерации изображения...
INFO:predict:📝 Входной промпт: 50% red, 30% black, 20% white
INFO:predict:🚫 Входной негативный промпт: None
INFO:predict:🎲 Входной сид: 12345
INFO:predict:🔧 Установлен стандартный негативный промпт: object, text, watermark, logo, signature, blur, blurry, low quality, distorted, mosaic, checkerboard, grid, patchwork, tiled, seams
INFO:predict:🎨 Генерация изображения...
INFO:predict:📝 Полный промпт: ohwx_rubber_tile <s0><s1>, 50% red, 30% black, 20% white, photorealistic rubber tile, high quality, detailed texture, professional photography, sharp focus
INFO:predict:🚫 Финальный негативный промпт: object, text, watermark, logo, signature, blur, blurry, low quality, distorted, mosaic, checkerboard, grid, patchwork, tiled, seams
INFO:predict:🎲 Финальный сид: 12345
INFO:predict:🔧 Устройство: cuda
INFO:predict:🎨 Анализ сложности промпта для адаптивных параметров...
INFO:predict:🎨 Обнаружено цветов в промпте: 3
INFO:predict:🎯 Адаптивные параметры для 3 цветов: steps=30, guidance=8.0
INFO:predict:🚀 Запуск pipeline для генерации с адаптивными параметрами...
ERROR:predict:❌ Ошибка генерации: 'Predictor' object has no attribute 'select_optimal_controlnet'
ERROR:predict:📊 Тип ошибки: AttributeError
ERROR:predict:📊 Детали ошибки: 'Predictor' object has no attribute 'select_optimal_controlnet'
Traceback (most recent call last):
  File "/root/.pyenv/versions/3.11.13/lib/python3.11/site-packages/coglet/file_runner.py", line 218, in _predict
    async for o in self.runner.predict_iter(req_in):
  File "/root/.pyenv/versions/3.11.13/lib/python3.11/site-packages/coglet/runner.py", line 150, in predict_iter
    for x in self.predictor.predict(**kwargs):
  File "/src/predict.py", line 1262, in predict
    raise e
  File "/src/predict.py", line 1063, in predict
    selected_controlnets = self.select_optimal_controlnet(color_count)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Predictor' object has no attribute 'select_optimal_controlnet'
ERROR:coglet:prediction failed: id=qr6ydt2b2drge0cs1xh8kdfr4w 'Predictor' object has no attribute 'select_optimal_controlnet'
Traceback (most recent call last):
  File "/root/.pyenv/versions/3.11.13/lib/python3.11/site-packages/coglet/file_runner.py", line 218, in _predict
    async for o in self.runner.predict_iter(req_in):
  File "/root/.pyenv/versions/3.11.13/lib/python3.11/site-packages/coglet/runner.py", line 150, in predict_iter
    for x in self.predictor.predict(**kwargs):
  File "/src/predict.py", line 1262, in predict
    raise e
  File "/src/predict.py", line 1063, in predict
    selected_controlnets = self.select_optimal_controlnet(color_count)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Predictor' object has no attribute 'select_optimal_controlnet'
[2025-09-03 14:42:04] 
❌ Boot error detected before startup completed. Cancelling prediction...
[2025-09-03 14:42:04] 
################ PRESET: basic_four_colors ################
[2025-09-03 14:42:04] 🔄 _run_single() вызван
[2025-09-03 14:42:04] 
=== Creating prediction: nauslava/plitka-pro-project (version: 11c3b4e4dec5e76ea6fa1d7d3c5435fd07c5053ea2e9c4033433939e6d07a295)
Inputs: {"prompt": "25% red, 25% blue, 25% grsgrn, 25% yellow", "seed": 12345, "steps": 35, "guidance": 8.5, "lora_scale": 0.7, "use_controlnet": false, "description": "Тест 4 цветов - максимальная сложность, базовые параметры"}
[2025-09-03 14:42:05] Prediction id: 318b80jev1rga0cs1xh8a2n0rw
[2025-09-03 14:42:05] 🔍 Начинаем создание папки для результатов...
[2025-09-03 14:42:05] 🔍 Текущий рабочий каталог: /home/papaandrey/plitka-pro-project
[2025-09-03 14:42:05] 🔍 Используем версию и хеш из App:
[2025-09-03 14:42:05] 🔍 version_id: 11c3b4e4dec5e76ea6fa1d7d3c5435fd07c5053ea2e9c4033433939e6d07a295
[2025-09-03 14:42:05] 🔍 pred.version: 11c3b4e4dec5e76ea6fa1d7d3c5435fd07c5053ea2e9c4033433939e6d07a295
[2025-09-03 14:42:05] 🔍 ver_for_hash: v4.4.61
[2025-09-03 14:42:05] 🔐 Хеш из App: 11c3b4e4
[2025-09-03 14:42:05] 🔄 Папка создана: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144205
[2025-09-03 14:42:05] 🔄 _current_run_dir установлен: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144205
[2025-09-03 14:42:05] 🔐 Создаем папку с хешем: 11c3b4e4
[2025-09-03 14:42:05] 📁 Создана папка: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144205
[2025-09-03 14:42:05] 🔐 Хеш версии: 11c3b4e4
[2025-09-03 14:42:05] 🔍 Базовая папка: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4
[2025-09-03 14:42:05] 🔍 Полный путь: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144205
[2025-09-03 14:42:05] ✅ Папка успешно создана и существует
[2025-09-03 14:42:05] INFO:coglet:prediction started: id=318b80jev1rga0cs1xh8a2n0rw
WARNING unknown input field ignored: description
INFO:predict:🚀 STARTUP_SNAPSHOT_START
INFO:predict:🧭 MODEL_START v4.4.61 | device=cuda | diffusers=0.21.4 | torch=2.1.0+cu121
INFO:predict:📊 GPU: Tesla T4
INFO:predict:💾 GPU Memory: 14.6 GB
INFO:predict:🔧 SDXL Base: unknown
INFO:predict:🎨 LoRA: unknown (rank: 32)
INFO:predict:🔤 TI: unknown (tokens: <s0><s1>)
INFO:predict:⚙️ Scheduler: DPMSolverMultistepScheduler
INFO:predict:🎭 VAE: AutoencoderKL
INFO:predict:🎯 Prompt: 25% red, 25% blue, 25% grsgrn, 25% yellow
INFO:predict:🚫 Negative Prompt: None
INFO:predict:🎲 Seed: 12345
INFO:predict:📊 Steps: 35 (базовый)
INFO:predict:🎚️ Guidance: 8.5 (базовый)
INFO:predict:🔧 LoRA Scale: 0.7 (базовый)
INFO:predict:🎨 Адаптивные параметры будут рассчитаны на основе количества цветов
INFO:predict:🚀 STARTUP_SNAPSHOT_END
INFO:predict:🎨 Начало генерации изображения...
INFO:predict:📝 Входной промпт: 25% red, 25% blue, 25% grsgrn, 25% yellow
INFO:predict:🚫 Входной негативный промпт: None
INFO:predict:🎲 Входной сид: 12345
INFO:predict:🔧 Установлен стандартный негативный промпт: object, text, watermark, logo, signature, blur, blurry, low quality, distorted, mosaic, checkerboard, grid, patchwork, tiled, seams
INFO:predict:🎨 Генерация изображения...
INFO:predict:📝 Полный промпт: ohwx_rubber_tile <s0><s1>, 25% red, 25% blue, 25% grsgrn, 25% yellow, photorealistic rubber tile, high quality, detailed texture, professional photography, sharp focus
INFO:predict:🚫 Финальный негативный промпт: object, text, watermark, logo, signature, blur, blurry, low quality, distorted, mosaic, checkerboard, grid, patchwork, tiled, seams
INFO:predict:🎲 Финальный сид: 12345
INFO:predict:🔧 Устройство: cuda
INFO:predict:🎨 Анализ сложности промпта для адаптивных параметров...
INFO:predict:🎨 Обнаружено цветов в промпте: 4
INFO:predict:🎯 Адаптивные параметры для 4+ цветов: steps=35, guidance=8.5
INFO:predict:🚀 Запуск pipeline для генерации с адаптивными параметрами...
ERROR:predict:❌ Ошибка генерации: 'Predictor' object has no attribute 'select_optimal_controlnet'
ERROR:predict:📊 Тип ошибки: AttributeError
ERROR:predict:📊 Детали ошибки: 'Predictor' object has no attribute 'select_optimal_controlnet'
Traceback (most recent call last):
  File "/root/.pyenv/versions/3.11.13/lib/python3.11/site-packages/coglet/file_runner.py", line 218, in _predict
    async for o in self.runner.predict_iter(req_in):
  File "/root/.pyenv/versions/3.11.13/lib/python3.11/site-packages/coglet/runner.py", line 150, in predict_iter
    for x in self.predictor.predict(**kwargs):
  File "/src/predict.py", line 1262, in predict
    raise e
  File "/src/predict.py", line 1063, in predict
    selected_controlnets = self.select_optimal_controlnet(color_count)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Predictor' object has no attribute 'select_optimal_controlnet'
ERROR:coglet:prediction failed: id=318b80jev1rga0cs1xh8a2n0rw 'Predictor' object has no attribute 'select_optimal_controlnet'
Traceback (most recent call last):
  File "/root/.pyenv/versions/3.11.13/lib/python3.11/site-packages/coglet/file_runner.py", line 218, in _predict
    async for o in self.runner.predict_iter(req_in):
  File "/root/.pyenv/versions/3.11.13/lib/python3.11/site-packages/coglet/runner.py", line 150, in predict_iter
    for x in self.predictor.predict(**kwargs):
  File "/src/predict.py", line 1262, in predict
    raise e
  File "/src/predict.py", line 1063, in predict
    selected_controlnets = self.select_optimal_controlnet(color_count)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Predictor' object has no attribute 'select_optimal_controlnet'
[2025-09-03 14:42:05] 
❌ Boot error detected before startup completed. Cancelling prediction...
[2025-09-03 14:42:05] 
################ PRESET: basic_quality_test ################
[2025-09-03 14:42:05] 🔄 _run_single() вызван
[2025-09-03 14:42:05] 
=== Creating prediction: nauslava/plitka-pro-project (version: 11c3b4e4dec5e76ea6fa1d7d3c5435fd07c5053ea2e9c4033433939e6d07a295)
Inputs: {"prompt": "50% red, 50% white", "seed": 246810, "steps": 25, "guidance": 7.5, "lora_scale": 0.7, "use_controlnet": false, "description": "Тест качества с базовыми параметрами"}
[2025-09-03 14:42:06] Prediction id: v0n56zthkhrgc0cs1xh9rjkh24
[2025-09-03 14:42:06] 🔍 Начинаем создание папки для результатов...
[2025-09-03 14:42:06] 🔍 Текущий рабочий каталог: /home/papaandrey/plitka-pro-project
[2025-09-03 14:42:06] 🔍 Используем версию и хеш из App:
[2025-09-03 14:42:06] 🔍 version_id: 11c3b4e4dec5e76ea6fa1d7d3c5435fd07c5053ea2e9c4033433939e6d07a295
[2025-09-03 14:42:06] 🔍 pred.version: 11c3b4e4dec5e76ea6fa1d7d3c5435fd07c5053ea2e9c4033433939e6d07a295
[2025-09-03 14:42:06] 🔍 ver_for_hash: v4.4.61
[2025-09-03 14:42:06] 🔐 Хеш из App: 11c3b4e4
[2025-09-03 14:42:06] 🔄 Папка создана: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144205
[2025-09-03 14:42:06] 🔄 _current_run_dir установлен: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144205
[2025-09-03 14:42:06] 🔐 Создаем папку с хешем: 11c3b4e4
[2025-09-03 14:42:06] 📁 Создана папка: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144205
[2025-09-03 14:42:06] 🔐 Хеш версии: 11c3b4e4
[2025-09-03 14:42:06] 🔍 Базовая папка: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4
[2025-09-03 14:42:06] 🔍 Полный путь: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144205
[2025-09-03 14:42:06] ✅ Папка успешно создана и существует
[2025-09-03 14:42:06] INFO:coglet:prediction started: id=v0n56zthkhrgc0cs1xh9rjkh24
WARNING unknown input field ignored: description
INFO:predict:🚀 STARTUP_SNAPSHOT_START
INFO:predict:🧭 MODEL_START v4.4.61 | device=cuda | diffusers=0.21.4 | torch=2.1.0+cu121
INFO:predict:📊 GPU: Tesla T4
INFO:predict:💾 GPU Memory: 14.6 GB
INFO:predict:🔧 SDXL Base: unknown
INFO:predict:🎨 LoRA: unknown (rank: 32)
INFO:predict:🔤 TI: unknown (tokens: <s0><s1>)
INFO:predict:⚙️ Scheduler: DPMSolverMultistepScheduler
INFO:predict:🎭 VAE: AutoencoderKL
INFO:predict:🎯 Prompt: 50% red, 50% white
INFO:predict:🚫 Negative Prompt: None
INFO:predict:🎲 Seed: 246810
INFO:predict:📊 Steps: 25 (базовый)
INFO:predict:🎚️ Guidance: 7.5 (базовый)
INFO:predict:🔧 LoRA Scale: 0.7 (базовый)
INFO:predict:🎨 Адаптивные параметры будут рассчитаны на основе количества цветов
INFO:predict:🚀 STARTUP_SNAPSHOT_END
INFO:predict:🎨 Начало генерации изображения...
INFO:predict:📝 Входной промпт: 50% red, 50% white
INFO:predict:🚫 Входной негативный промпт: None
INFO:predict:🎲 Входной сид: 246810
INFO:predict:🔧 Установлен стандартный негативный промпт: object, text, watermark, logo, signature, blur, blurry, low quality, distorted, mosaic, checkerboard, grid, patchwork, tiled, seams
INFO:predict:🎨 Генерация изображения...
INFO:predict:📝 Полный промпт: ohwx_rubber_tile <s0><s1>, 50% red, 50% white, photorealistic rubber tile, high quality, detailed texture, professional photography, sharp focus
INFO:predict:🚫 Финальный негативный промпт: object, text, watermark, logo, signature, blur, blurry, low quality, distorted, mosaic, checkerboard, grid, patchwork, tiled, seams
INFO:predict:🎲 Финальный сид: 246810
INFO:predict:🔧 Устройство: cuda
INFO:predict:🎨 Анализ сложности промпта для адаптивных параметров...
INFO:predict:🎨 Обнаружено цветов в промпте: 2
INFO:predict:🎯 Адаптивные параметры для 2 цветов: steps=25, guidance=7.5
INFO:predict:🚀 Запуск pipeline для генерации с адаптивными параметрами...
ERROR:predict:❌ Ошибка генерации: 'Predictor' object has no attribute 'select_optimal_controlnet'
ERROR:predict:📊 Тип ошибки: AttributeError
ERROR:predict:📊 Детали ошибки: 'Predictor' object has no attribute 'select_optimal_controlnet'
Traceback (most recent call last):
  File "/root/.pyenv/versions/3.11.13/lib/python3.11/site-packages/coglet/file_runner.py", line 218, in _predict
    async for o in self.runner.predict_iter(req_in):
  File "/root/.pyenv/versions/3.11.13/lib/python3.11/site-packages/coglet/runner.py", line 150, in predict_iter
    for x in self.predictor.predict(**kwargs):
  File "/src/predict.py", line 1262, in predict
    raise e
  File "/src/predict.py", line 1063, in predict
    selected_controlnets = self.select_optimal_controlnet(color_count)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Predictor' object has no attribute 'select_optimal_controlnet'
ERROR:coglet:prediction failed: id=v0n56zthkhrgc0cs1xh9rjkh24 'Predictor' object has no attribute 'select_optimal_controlnet'
Traceback (most recent call last):
  File "/root/.pyenv/versions/3.11.13/lib/python3.11/site-packages/coglet/file_runner.py", line 218, in _predict
    async for o in self.runner.predict_iter(req_in):
  File "/root/.pyenv/versions/3.11.13/lib/python3.11/site-packages/coglet/runner.py", line 150, in predict_iter
    for x in self.predictor.predict(**kwargs):
  File "/src/predict.py", line 1262, in predict
    raise e
  File "/src/predict.py", line 1063, in predict
    selected_controlnets = self.select_optimal_controlnet(color_count)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Predictor' object has no attribute 'select_optimal_controlnet'
[2025-09-03 14:42:06] 
❌ Boot error detected before startup completed. Cancelling prediction...
[2025-09-03 14:42:06] 
################ PRESET: basic_legacy_compatibility ################
[2025-09-03 14:42:06] 🔄 _run_single() вызван
[2025-09-03 14:42:06] 
=== Creating prediction: nauslava/plitka-pro-project (version: 11c3b4e4dec5e76ea6fa1d7d3c5435fd07c5053ea2e9c4033433939e6d07a295)
Inputs: {"prompt": "60% red, 40% white", "seed": 12345, "steps": 35, "guidance": 8.0, "lora_scale": 0.75, "use_controlnet": false, "description": "Тест совместимости со старыми параметрами"}
[2025-09-03 14:42:06] Prediction id: jq8mnm2mcxrg80cs1xh8xwcszg
[2025-09-03 14:42:06] 🔍 Начинаем создание папки для результатов...
[2025-09-03 14:42:06] 🔍 Текущий рабочий каталог: /home/papaandrey/plitka-pro-project
[2025-09-03 14:42:06] 🔍 Используем версию и хеш из App:
[2025-09-03 14:42:06] 🔍 version_id: 11c3b4e4dec5e76ea6fa1d7d3c5435fd07c5053ea2e9c4033433939e6d07a295
[2025-09-03 14:42:06] 🔍 pred.version: 11c3b4e4dec5e76ea6fa1d7d3c5435fd07c5053ea2e9c4033433939e6d07a295
[2025-09-03 14:42:06] 🔍 ver_for_hash: v4.4.61
[2025-09-03 14:42:06] 🔐 Хеш из App: 11c3b4e4
[2025-09-03 14:42:06] 🔄 Папка создана: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144206
[2025-09-03 14:42:06] 🔄 _current_run_dir установлен: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144206
[2025-09-03 14:42:06] 🔐 Создаем папку с хешем: 11c3b4e4
[2025-09-03 14:42:06] 📁 Создана папка: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144206
[2025-09-03 14:42:06] 🔐 Хеш версии: 11c3b4e4
[2025-09-03 14:42:06] 🔍 Базовая папка: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4
[2025-09-03 14:42:06] 🔍 Полный путь: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144206
[2025-09-03 14:42:06] ✅ Папка успешно создана и существует
[2025-09-03 14:42:07] INFO:coglet:prediction started: id=jq8mnm2mcxrg80cs1xh8xwcszg
WARNING unknown input field ignored: description
INFO:predict:🚀 STARTUP_SNAPSHOT_START
INFO:predict:🧭 MODEL_START v4.4.61 | device=cuda | diffusers=0.21.4 | torch=2.1.0+cu121
INFO:predict:📊 GPU: Tesla T4
INFO:predict:💾 GPU Memory: 14.6 GB
INFO:predict:🔧 SDXL Base: unknown
INFO:predict:🎨 LoRA: unknown (rank: 32)
INFO:predict:🔤 TI: unknown (tokens: <s0><s1>)
INFO:predict:⚙️ Scheduler: DPMSolverMultistepScheduler
INFO:predict:🎭 VAE: AutoencoderKL
INFO:predict:🎯 Prompt: 60% red, 40% white
INFO:predict:🚫 Negative Prompt: None
INFO:predict:🎲 Seed: 12345
INFO:predict:📊 Steps: 35 (базовый)
INFO:predict:🎚️ Guidance: 8.0 (базовый)
INFO:predict:🔧 LoRA Scale: 0.75 (базовый)
INFO:predict:🎨 Адаптивные параметры будут рассчитаны на основе количества цветов
INFO:predict:🚀 STARTUP_SNAPSHOT_END
INFO:predict:🎨 Начало генерации изображения...
INFO:predict:📝 Входной промпт: 60% red, 40% white
INFO:predict:🚫 Входной негативный промпт: None
INFO:predict:🎲 Входной сид: 12345
INFO:predict:🔧 Установлен стандартный негативный промпт: object, text, watermark, logo, signature, blur, blurry, low quality, distorted, mosaic, checkerboard, grid, patchwork, tiled, seams
INFO:predict:🎨 Генерация изображения...
INFO:predict:📝 Полный промпт: ohwx_rubber_tile <s0><s1>, 60% red, 40% white, photorealistic rubber tile, high quality, detailed texture, professional photography, sharp focus
INFO:predict:🚫 Финальный негативный промпт: object, text, watermark, logo, signature, blur, blurry, low quality, distorted, mosaic, checkerboard, grid, patchwork, tiled, seams
INFO:predict:🎲 Финальный сид: 12345
INFO:predict:🔧 Устройство: cuda
INFO:predict:🎨 Анализ сложности промпта для адаптивных параметров...
INFO:predict:🎨 Обнаружено цветов в промпте: 2
INFO:predict:🎯 Адаптивные параметры для 2 цветов: steps=25, guidance=7.5
INFO:predict:🚀 Запуск pipeline для генерации с адаптивными параметрами...
ERROR:predict:❌ Ошибка генерации: 'Predictor' object has no attribute 'select_optimal_controlnet'
ERROR:predict:📊 Тип ошибки: AttributeError
ERROR:predict:📊 Детали ошибки: 'Predictor' object has no attribute 'select_optimal_controlnet'
Traceback (most recent call last):
  File "/root/.pyenv/versions/3.11.13/lib/python3.11/site-packages/coglet/file_runner.py", line 218, in _predict
    async for o in self.runner.predict_iter(req_in):
  File "/root/.pyenv/versions/3.11.13/lib/python3.11/site-packages/coglet/runner.py", line 150, in predict_iter
    for x in self.predictor.predict(**kwargs):
  File "/src/predict.py", line 1262, in predict
    raise e
  File "/src/predict.py", line 1063, in predict
    selected_controlnets = self.select_optimal_controlnet(color_count)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Predictor' object has no attribute 'select_optimal_controlnet'
ERROR:coglet:prediction failed: id=jq8mnm2mcxrg80cs1xh8xwcszg 'Predictor' object has no attribute 'select_optimal_controlnet'
Traceback (most recent call last):
  File "/root/.pyenv/versions/3.11.13/lib/python3.11/site-packages/coglet/file_runner.py", line 218, in _predict
    async for o in self.runner.predict_iter(req_in):
  File "/root/.pyenv/versions/3.11.13/lib/python3.11/site-packages/coglet/runner.py", line 150, in predict_iter
    for x in self.predictor.predict(**kwargs):
  File "/src/predict.py", line 1262, in predict
    raise e
  File "/src/predict.py", line 1063, in predict
    selected_controlnets = self.select_optimal_controlnet(color_count)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Predictor' object has no attribute 'select_optimal_controlnet'
[2025-09-03 14:42:07] 
❌ Boot error detected before startup completed. Cancelling prediction...
[2025-09-03 14:42:07] 
################ PRESET: basic_edge_case_minimal ################
[2025-09-03 14:42:07] 🔄 _run_single() вызван
[2025-09-03 14:42:07] 
=== Creating prediction: nauslava/plitka-pro-project (version: 11c3b4e4dec5e76ea6fa1d7d3c5435fd07c5053ea2e9c4033433939e6d07a295)
Inputs: {"prompt": "1% red, 99% white", "seed": 444444, "steps": 25, "guidance": 7.5, "lora_scale": 0.7, "use_controlnet": false, "description": "Тест граничного случая с минимальным количеством одного цвета"}
[2025-09-03 14:42:07] Prediction id: 3zjq2b2q41rge0cs1xh89zf7e0
[2025-09-03 14:42:07] 🔍 Начинаем создание папки для результатов...
[2025-09-03 14:42:07] 🔍 Текущий рабочий каталог: /home/papaandrey/plitka-pro-project
[2025-09-03 14:42:07] 🔍 Используем версию и хеш из App:
[2025-09-03 14:42:07] 🔍 version_id: 11c3b4e4dec5e76ea6fa1d7d3c5435fd07c5053ea2e9c4033433939e6d07a295
[2025-09-03 14:42:07] 🔍 pred.version: 11c3b4e4dec5e76ea6fa1d7d3c5435fd07c5053ea2e9c4033433939e6d07a295
[2025-09-03 14:42:07] 🔍 ver_for_hash: v4.4.61
[2025-09-03 14:42:07] 🔐 Хеш из App: 11c3b4e4
[2025-09-03 14:42:07] 🔄 Папка создана: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144207
[2025-09-03 14:42:07] 🔄 _current_run_dir установлен: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144207
[2025-09-03 14:42:07] 🔐 Создаем папку с хешем: 11c3b4e4
[2025-09-03 14:42:07] 📁 Создана папка: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144207
[2025-09-03 14:42:07] 🔐 Хеш версии: 11c3b4e4
[2025-09-03 14:42:07] 🔍 Базовая папка: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4
[2025-09-03 14:42:07] 🔍 Полный путь: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144207
[2025-09-03 14:42:07] ✅ Папка успешно создана и существует
[2025-09-03 14:42:07] INFO:coglet:prediction started: id=3zjq2b2q41rge0cs1xh89zf7e0
WARNING unknown input field ignored: description
INFO:predict:🚀 STARTUP_SNAPSHOT_START
INFO:predict:🧭 MODEL_START v4.4.61 | device=cuda | diffusers=0.21.4 | torch=2.1.0+cu121
INFO:predict:📊 GPU: Tesla T4
INFO:predict:💾 GPU Memory: 14.6 GB
INFO:predict:🔧 SDXL Base: unknown
INFO:predict:🎨 LoRA: unknown (rank: 32)
INFO:predict:🔤 TI: unknown (tokens: <s0><s1>)
INFO:predict:⚙️ Scheduler: DPMSolverMultistepScheduler
INFO:predict:🎭 VAE: AutoencoderKL
INFO:predict:🎯 Prompt: 1% red, 99% white
INFO:predict:🚫 Negative Prompt: None
INFO:predict:🎲 Seed: 444444
INFO:predict:📊 Steps: 25 (базовый)
INFO:predict:🎚️ Guidance: 7.5 (базовый)
INFO:predict:🔧 LoRA Scale: 0.7 (базовый)
INFO:predict:🎨 Адаптивные параметры будут рассчитаны на основе количества цветов
INFO:predict:🚀 STARTUP_SNAPSHOT_END
INFO:predict:🎨 Начало генерации изображения...
INFO:predict:📝 Входной промпт: 1% red, 99% white
INFO:predict:🚫 Входной негативный промпт: None
INFO:predict:🎲 Входной сид: 444444
INFO:predict:🔧 Установлен стандартный негативный промпт: object, text, watermark, logo, signature, blur, blurry, low quality, distorted, mosaic, checkerboard, grid, patchwork, tiled, seams
INFO:predict:🎨 Генерация изображения...
INFO:predict:📝 Полный промпт: ohwx_rubber_tile <s0><s1>, 1% red, 99% white, photorealistic rubber tile, high quality, detailed texture, professional photography, sharp focus
INFO:predict:🚫 Финальный негативный промпт: object, text, watermark, logo, signature, blur, blurry, low quality, distorted, mosaic, checkerboard, grid, patchwork, tiled, seams
INFO:predict:🎲 Финальный сид: 444444
INFO:predict:🔧 Устройство: cuda
INFO:predict:🎨 Анализ сложности промпта для адаптивных параметров...
INFO:predict:🎨 Обнаружено цветов в промпте: 2
INFO:predict:🎯 Адаптивные параметры для 2 цветов: steps=25, guidance=7.5
INFO:predict:🚀 Запуск pipeline для генерации с адаптивными параметрами...
ERROR:predict:❌ Ошибка генерации: 'Predictor' object has no attribute 'select_optimal_controlnet'
ERROR:predict:📊 Тип ошибки: AttributeError
ERROR:predict:📊 Детали ошибки: 'Predictor' object has no attribute 'select_optimal_controlnet'
Traceback (most recent call last):
  File "/root/.pyenv/versions/3.11.13/lib/python3.11/site-packages/coglet/file_runner.py", line 218, in _predict
    async for o in self.runner.predict_iter(req_in):
  File "/root/.pyenv/versions/3.11.13/lib/python3.11/site-packages/coglet/runner.py", line 150, in predict_iter
    for x in self.predictor.predict(**kwargs):
  File "/src/predict.py", line 1262, in predict
    raise e
  File "/src/predict.py", line 1063, in predict
    selected_controlnets = self.select_optimal_controlnet(color_count)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Predictor' object has no attribute 'select_optimal_controlnet'
ERROR:coglet:prediction failed: id=3zjq2b2q41rge0cs1xh89zf7e0 'Predictor' object has no attribute 'select_optimal_controlnet'
Traceback (most recent call last):
  File "/root/.pyenv/versions/3.11.13/lib/python3.11/site-packages/coglet/file_runner.py", line 218, in _predict
    async for o in self.runner.predict_iter(req_in):
  File "/root/.pyenv/versions/3.11.13/lib/python3.11/site-packages/coglet/runner.py", line 150, in predict_iter
    for x in self.predictor.predict(**kwargs):
  File "/src/predict.py", line 1262, in predict
    raise e
  File "/src/predict.py", line 1063, in predict
    selected_controlnets = self.select_optimal_controlnet(color_count)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Predictor' object has no attribute 'select_optimal_controlnet'
[2025-09-03 14:42:07] 
❌ Boot error detected before startup completed. Cancelling prediction...
[2025-09-03 14:42:07] 
################ PRESET: basic_edge_case_balanced ################
[2025-09-03 14:42:07] 🔄 _run_single() вызван
[2025-09-03 14:42:07] 
=== Creating prediction: nauslava/plitka-pro-project (version: 11c3b4e4dec5e76ea6fa1d7d3c5435fd07c5053ea2e9c4033433939e6d07a295)
Inputs: {"prompt": "25% red, 25% blue, 25% grsgrn, 25% white", "seed": 555555, "steps": 35, "guidance": 8.5, "lora_scale": 0.7, "use_controlnet": false, "description": "Тест граничного случая с 4 цветами (максимальный лимит) - для проверки валидации"}
[2025-09-03 14:42:08] Prediction id: 34enhmjsvdrga0cs1xhamcqx1g
[2025-09-03 14:42:08] 🔍 Начинаем создание папки для результатов...
[2025-09-03 14:42:08] 🔍 Текущий рабочий каталог: /home/papaandrey/plitka-pro-project
[2025-09-03 14:42:08] 🔍 Используем версию и хеш из App:
[2025-09-03 14:42:08] 🔍 version_id: 11c3b4e4dec5e76ea6fa1d7d3c5435fd07c5053ea2e9c4033433939e6d07a295
[2025-09-03 14:42:08] 🔍 pred.version: 11c3b4e4dec5e76ea6fa1d7d3c5435fd07c5053ea2e9c4033433939e6d07a295
[2025-09-03 14:42:08] 🔍 ver_for_hash: v4.4.61
[2025-09-03 14:42:08] 🔐 Хеш из App: 11c3b4e4
[2025-09-03 14:42:08] 🔄 Папка создана: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144207
[2025-09-03 14:42:08] 🔄 _current_run_dir установлен: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144207
[2025-09-03 14:42:08] 🔐 Создаем папку с хешем: 11c3b4e4
[2025-09-03 14:42:08] 📁 Создана папка: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144207
[2025-09-03 14:42:08] 🔐 Хеш версии: 11c3b4e4
[2025-09-03 14:42:08] 🔍 Базовая папка: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4
[2025-09-03 14:42:08] 🔍 Полный путь: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144207
[2025-09-03 14:42:08] ✅ Папка успешно создана и существует
[2025-09-03 14:42:15] 
=== Final status: failed
[2025-09-03 14:42:15] 🔄 _save_outputs вызван
[2025-09-03 14:42:15] 💾 Сохраняем результаты в папку: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144207
[2025-09-03 14:42:15] 🔐 ПРИНУДИТЕЛЬНО используем хеш: 89fdd926
[2025-09-03 14:42:15] ✅ Используем подготовленную папку: /home/papaandrey/plitka-pro-project/replicate_runs/11c3b4e4/run_20250903_144207
[2025-09-03 14:42:15] 
[GUI] Done.
