[2025-09-04 08:21:36] 🔍 Автоматически определенные значения:
[2025-09-04 08:21:36] 🔍 ver_for_hash: v4.5.01
[2025-09-04 08:21:36] 🔐 forced_hash: 32cbff02
[2025-09-04 08:21:36] 🔄 Папка создана: /home/papaandrey/plitka-pro-project/replicate_runs/32cbff02/run_20250904_082135
[2025-09-04 08:21:36] 🔄 _current_run_dir установлен: /home/papaandrey/plitka-pro-project/replicate_runs/32cbff02/run_20250904_082135
[2025-09-04 08:21:36] 🔐 Создаем папку с хешем: 32cbff02
[2025-09-04 08:21:36] 📁 Создана папка: /home/papaandrey/plitka-pro-project/replicate_runs/32cbff02/run_20250904_082135
[2025-09-04 08:21:36] 🔐 Хеш версии: 32cbff02
[2025-09-04 08:21:36] 🔍 Базовая папка: /home/papaandrey/plitka-pro-project/replicate_runs/32cbff02
[2025-09-04 08:21:36] 🔍 Полный путь: /home/papaandrey/plitka-pro-project/replicate_runs/32cbff02/run_20250904_082135
[2025-09-04 08:21:36] ✅ Папка успешно создана и существует
[2025-09-04 08:25:08] INFO:coglet:prediction started: id=c11tfxjgmdrg80cs2cpa2kg04r
WARNING unknown input field ignored: colormap
[2025-09-04 08:25:08] 
✅ Startup phase completed. Proceeding to completion...
[2025-09-04 08:25:14] WARNING unknown input field ignored: granule_size
WARNING unknown input field ignored: guidance_scale
WARNING unknown input field ignored: num_inference_steps
WARNING unknown input field ignored: test_purpose
INFO:predict:🚀 STARTUP_SNAPSHOT_START
INFO:predict:🧭 MODEL_START v4.5.01 | device=cuda | diffusers=0.21.4 | torch=2.1.0+cu121
INFO:predict:📊 GPU: Tesla T4
INFO:predict:💾 GPU Memory: 14.6 GB
INFO:predict:🔧 SDXL Base: unknown
INFO:predict:🎨 LoRA: unknown (rank: 32)
INFO:predict:🔤 TI: unknown (tokens: <s0><s1>)
INFO:predict:⚙️ Scheduler: DPMSolverMultistepScheduler
INFO:predict:🎭 VAE: AutoencoderKL
INFO:predict:🎯 Prompt: ohwx_rubber_tile <s0><s1> 100% red rubber tile, high quality, realistic texture
INFO:predict:🚫 Negative Prompt: missing red, blurry, low quality, artifacts
INFO:predict:🎲 Seed: 42
INFO:predict:📊 Steps: 20 (базовый)
INFO:predict:🎚️ Guidance: 7.0 (базовый)
INFO:predict:🔧 LoRA Scale: 0.7 (базовый)
INFO:predict:🎨 Адаптивные параметры будут рассчитаны на основе количества цветов
INFO:predict:🚀 STARTUP_SNAPSHOT_END
INFO:predict:🎨 Начало генерации изображения...
INFO:predict:📝 Входной промпт: ohwx_rubber_tile <s0><s1> 100% red rubber tile, high quality, realistic texture
INFO:predict:🚫 Входной негативный промпт: missing red, blurry, low quality, artifacts
INFO:predict:🎲 Входной сид: 42
INFO:predict:🎨 Генерация изображения...
INFO:predict:📝 Полный промпт: ohwx_rubber_tile <s0><s1> 100% red rubber tile, high quality, realistic texture, photorealistic rubber tile, high quality, detailed texture, professional photography, sharp focus
INFO:predict:🚫 Финальный негативный промпт: missing red, blurry, low quality, artifacts
INFO:predict:🎲 Финальный сид: 42
INFO:predict:🔧 Устройство: cuda
INFO:predict:🎨 Анализ сложности промпта для адаптивных параметров...
INFO:predict:🎨 Обнаружено цветов в промпте: 1
INFO:predict:🎯 Адаптивные параметры для 1 цвета: steps=20, guidance=7.0
INFO:predict:🚀 Запуск pipeline для генерации с адаптивными параметрами...
INFO:predict:🚀 Финальный сегмент: единый проход без callback

  0%|          | 0/20 [00:00<?, ?it/s]
  5%|▌         | 1/20 [00:03<01:05,  3.47s/it]
 10%|█         | 2/20 [00:04<00:35,  1.97s/it]
 15%|█▌        | 3/20 [00:05<00:25,  1.49s/it]
[2025-09-04 08:25:21]  20%|██        | 4/20 [00:06<00:20,  1.27s/it]
 25%|██▌       | 5/20 [00:07<00:17,  1.15s/it]
 30%|███       | 6/20 [00:08<00:15,  1.08s/it]
 35%|███▌      | 7/20 [00:09<00:13,  1.03s/it]
 40%|████      | 8/20 [00:10<00:12,  1.01s/it]
 45%|████▌     | 9/20 [00:10<00:10,  1.01it/s]
 50%|█████     | 10/20 [00:11<00:09,  1.02it/s]
[2025-09-04 08:25:27]  55%|█████▌    | 11/20 [00:12<00:08,  1.02it/s]
 60%|██████    | 12/20 [00:13<00:07,  1.03it/s]
 65%|██████▌   | 13/20 [00:14<00:06,  1.03it/s]
 70%|███████   | 14/20 [00:15<00:05,  1.03it/s]
 75%|███████▌  | 15/20 [00:16<00:04,  1.02it/s]
 80%|████████  | 16/20 [00:17<00:03,  1.02it/s]
 85%|████████▌ | 17/20 [00:18<00:02,  1.02it/s]
[2025-09-04 08:25:34]  90%|█████████ | 18/20 [00:19<00:01,  1.01it/s]
 95%|█████████▌| 19/20 [00:20<00:00,  1.01it/s]
[2025-09-04 08:26:00] 100%|██████████| 20/20 [00:21<00:00,  1.01it/s]
100%|██████████| 20/20 [00:21<00:00,  1.09s/it]
INFO:predict:✅ Финальная генерация завершена
[2025-09-04 08:26:07] INFO:predict:📊 Размер сгенерированного изображения: (1024, 1024)
INFO:predict:✅ FINAL_READY /tmp/final.png
WARNING:predict:⚠️ Не удалось распарсить цвета, создаем базовый colormap
ERROR:predict:❌ Ошибка валидации colormap: operands could not be broadcast together with shapes (1024,1024,4) (3,) 
WARNING:predict:⚠️ Colormap не соответствует промпту, пересоздаем...
INFO:predict:🔧 Принудительная пересборка colormap...
INFO:predict:✅ Colormap пересобран для цветов: ['red']
INFO:predict:🎨 ОПТИМИЗИРОВАННЫЙ COLORMAP_READY /tmp/colormap.png
INFO:predict:📊 Размер colormap: (1024, 1024)
INFO:predict:📋 ЛЕГЕНДА_READY /tmp/legend.png
INFO:predict:🧹 Память очищена
INFO:predict:📄 JSON_READY /tmp/generation_data.json
INFO:predict:✅ Изображение успешно сгенерировано!
INFO:predict:📊 Color Grid Adapter статистика:
INFO:predict:   - Всего генераций: 1
INFO:predict:   - ControlNet использован: 0 (0.0%)
INFO:predict:   - Популярный паттерн: random
INFO:predict:   - Популярный размер гранул: small
INFO:coglet:prediction completed: id=c11tfxjgmdrg80cs2cpa2kg04r
[2025-09-04 08:26:07] 🔄 Загрузка изображения 0: https://replicate.delivery/czjl/9SkaVDI1BFLmClkuwGG5E5Yy1xUbAKxI9EgGqFQB4rK6UbUF/final.png
[2025-09-04 08:26:08] ✅ Изображение сохранено: /home/papaandrey/plitka-pro-project/replicate_runs/32cbff02/run_20250904_082135/out_0.png
[2025-09-04 08:26:08] 🔄 Загрузка изображения 1: https://replicate.delivery/czjl/LiVHlTpbi7qpM5rY9hmhu69pQpCguHd0sPR4grA19MN6UbUF/colormap.png
[2025-09-04 08:26:09] ✅ Изображение сохранено: /home/papaandrey/plitka-pro-project/replicate_runs/32cbff02/run_20250904_082135/out_1.png
[2025-09-04 08:26:09] 🔄 Загрузка изображения 2: https://replicate.delivery/czjl/GiP4i7Avh24gLZAAcIuqVYy0Ij06eOxDpWXYafAetRYQnajqA/legend.png
[2025-09-04 08:26:09] ✅ Изображение сохранено: /home/papaandrey/plitka-pro-project/replicate_runs/32cbff02/run_20250904_082135/out_2.png
[2025-09-04 08:26:09] 
=== Final status: succeeded
[2025-09-04 08:26:09] [
  "https://replicate.delivery/czjl/9SkaVDI1BFLmClkuwGG5E5Yy1xUbAKxI9EgGqFQB4rK6UbUF/final.png",
  "https://replicate.delivery/czjl/LiVHlTpbi7qpM5rY9hmhu69pQpCguHd0sPR4grA19MN6UbUF/colormap.png",
  "https://replicate.delivery/czjl/GiP4i7Avh24gLZAAcIuqVYy0Ij06eOxDpWXYafAetRYQnajqA/legend.png"
]
[2025-09-04 08:26:09] 🔄 _save_outputs вызван
[2025-09-04 08:26:09] 💾 Сохраняем результаты в папку: /home/papaandrey/plitka-pro-project/replicate_runs/32cbff02/run_20250904_082135
[2025-09-04 08:26:09] 🔐 ПРИНУДИТЕЛЬНО используем хеш: 89fdd926
[2025-09-04 08:26:09] ✅ Используем подготовленную папку: /home/papaandrey/plitka-pro-project/replicate_runs/32cbff02/run_20250904_082135
[2025-09-04 08:26:09] 🔄 Начинаем обработку 3 выходных файлов...
[2025-09-04 08:26:09] 📁 Папка для сохранения: /home/papaandrey/plitka-pro-project/replicate_runs/32cbff02/run_20250904_082135
[2025-09-04 08:26:10] 📥 Скачан файл 0: out_0.png
[2025-09-04 08:26:10] 📥 Скачан файл 1: out_1.png
[2025-09-04 08:26:10] 📥 Скачан файл 2: out_2.png
[2025-09-04 08:26:10] 📁 Найдено файлов для переименования: 3
[2025-09-04 08:26:10] 📝 Промпт для именования: 'ohwx_rubber_tile_<s0><s1>_100pct_red_rubber_tile,_'
[2025-09-04 08:26:10] ⏰ Временная метка из папки: 20250904_082135
[2025-09-04 08:26:11] 🔐 Автоматически определенный хеш версии: 315aaaea
[2025-09-04 08:26:11] ✅ FINAL saved as: 20250904_082135_ohwx_rubber_tile_<s0><s1>_100pct_red_rubber_tile,__final_315aaaea.png
[2025-09-04 08:26:11] 📁 Путь: /home/papaandrey/plitka-pro-project/replicate_runs/32cbff02/run_20250904_082135/20250904_082135_ohwx_rubber_tile_<s0><s1>_100pct_red_rubber_tile,__final_315aaaea.png
[2025-09-04 08:26:11] 🎨 COLORMAP saved as: 20250904_082135_ohwx_rubber_tile_<s0><s1>_100pct_red_rubber_tile,__colormap_315aaaea.png
[2025-09-04 08:26:11] 📁 Путь: /home/papaandrey/plitka-pro-project/replicate_runs/32cbff02/run_20250904_082135/20250904_082135_ohwx_rubber_tile_<s0><s1>_100pct_red_rubber_tile,__colormap_315aaaea.png
[2025-09-04 08:26:11] 
[GUI] Done.
[2025-09-04 08:26:41] 📋 Выбран пресет: 🔴🔵 DUO COLOR - ATTRIBUTEERROR FIX ✅
[2025-09-04 08:26:43] 📋 Выбрано пресетов: 2
[2025-09-04 08:26:43]   • 🔴🔵 DUO COLOR - ATTRIBUTEERROR FIX
[2025-09-04 08:26:43]   • 🔴🔵🔵 TRIO COLOR - CONTROLNET METHODS
[2025-09-04 08:26:45] 📋 Выбрано пресетов: 3
[2025-09-04 08:26:45]   • 🔴🔵 DUO COLOR - ATTRIBUTEERROR FIX
[2025-09-04 08:26:45]   • 🔴🔵🔵 TRIO COLOR - CONTROLNET METHODS
[2025-09-04 08:26:45]   • 🌈 MULTI COLOR - COMPLEX CONTROLNET
[2025-09-04 08:26:49] 🔄 on_start() вызван
[2025-09-04 08:26:49] 
[GUI] Starting tests...
[2025-09-04 08:26:49] 🚀 Запуск с версией: v4.5.01
[2025-09-04 08:26:49] 🔐 Хеш папки: 32cbff02
[2025-09-04 08:26:49] 📁 Ожидаемая папка: replicate_runs/32cbff02/
[2025-09-04 08:26:49] 🔍 Текущий рабочий каталог: /home/papaandrey/plitka-pro-project
[2025-09-04 08:26:49] 📁 Полный путь: /home/papaandrey/plitka-pro-project/replicate_runs/32cbff02
[2025-09-04 08:26:49] 📁 Абсолютный путь: /home/papaandrey/plitka-pro-project/replicate_runs/32cbff02
[2025-09-04 08:26:49] --------------------------------------------------
[2025-09-04 08:26:49] 🔄 run_presets() вызван
[2025-09-04 08:26:49] 
################ PRESET: 🔴🔵 DUO COLOR - ATTRIBUTEERROR FIX ################
[2025-09-04 08:26:49] 🔄 _run_single() вызван
[2025-09-04 08:26:49] 
=== Creating prediction: nauslava/plitka-pro-project (version: 32cbff024118a62304c89c1d5246664b37652e308d024d82e35d10b316d881a5)
Inputs: {"prompt": "ohwx_rubber_tile <s0><s1> 50% red, 50% blue rubber tile, grid pattern, scattered dots, realistic texture", "negative_prompt": "missing red, missing blue, blurry, low quality, vertical stripes, solid bands", "num_inference_steps": 25, "guidance_scale": 7.5, "seed": 123, "colormap": "grid", "granule_size": "medium", "test_purpose": "Тестирование исправления AttributeError для дуо-цветов"}
[2025-09-04 08:26:49] 🔄 Worker.start() вызван, поток запущен
