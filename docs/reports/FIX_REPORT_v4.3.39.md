# üîß –û—Ç—á–µ—Ç –æ–± –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö - Plitka Pro v4.3.39 "TOK PREFIX & TI FIX"

## üìã –û–±–∑–æ—Ä –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

**–í–µ—Ä—Å–∏—è**: v4.3.39 "TOK PREFIX & TI FIX"  
**–î–∞—Ç–∞**: 25 –¥–µ–∫–∞–±—Ä—è 2024  
**–°—Ç–∞—Ç—É—Å**: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –æ–±—É—á–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ü—Ä–æ–±–ª–µ–º—ã v4.3.38

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 1: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ø—Ä–æ–º–ø—Ç–æ–≤
```
INFO:predict:Generated prompt exactly as in training: ohwx_rubber_tile <s0><s1>, 100% white
```

**–ü—Ä–∏—á–∏–Ω–∞**: –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª –ø—Ä–µ—Ñ–∏–∫—Å `TOK, ` –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –≤ –æ–±—É—á–µ–Ω–∏–∏ –º–æ–¥–µ–ª–∏

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 2: Textual Inversion –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
```
ERROR:predict:‚ùå Failed to load OUR Textual Inversion: Loaded state dictionary is incorrect
```

**–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–≥—Ä—É–∑–∫–∏ - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã `<s0><s1>` –≤–º–µ—Å—Ç–æ –µ–¥–∏–Ω–æ–≥–æ `TOK`

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 3: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ –∫—ç—à–∞
```
The cache for model files in Transformers v4.22.0 has been updated. Migrating your old cache.
```

**–ü—Ä–∏—á–∏–Ω–∞**: –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–æ –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –º–∏–≥—Ä–∞—Ü–∏–∏ –∫—ç—à–∞

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ v4.3.39

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 1: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ø—Ä–æ–º–ø—Ç–æ–≤
**–ë—ã–ª–æ:**
```python
prompt = f"ohwx_rubber_tile <s0><s1>, {color_str}"
return "ohwx_rubber_tile <s0><s1>, 100% white"
```

**–°—Ç–∞–ª–æ:**
```python
prompt = f"TOK, ohwx_rubber_tile <s0><s1>, {color_str}"
return "TOK, ohwx_rubber_tile <s0><s1>, 100% white"
```

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 2: Textual Inversion –∑–∞–≥—Ä—É–∑–∫–∞
**–ë—ã–ª–æ:**
```python
self.pipe.load_textual_inversion(ti_path, token="<s0>")
self.pipe.load_textual_inversion(ti_path, token="<s1>")
```

**–°—Ç–∞–ª–æ:**
```python
self.pipe.load_textual_inversion(ti_path, token="TOK")
```

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 3: –ü–æ–¥–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
```python
warnings.filterwarnings("ignore", message=".*cache.*")
warnings.filterwarnings("ignore", message=".*migrating.*")
warnings.filterwarnings("ignore", message=".*transformers.*")

os.environ["TRANSFORMERS_CACHE"] = "/tmp/transformers_cache"
os.environ["HF_HOME"] = "/tmp/hf_home"
```

---

## üéØ –û–∂–∏–¥–∞–µ–º—ã–µ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### ‚úÖ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
1. **Textual Inversion**: –£—Å–ø–µ—à–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å —Ç–æ–∫–µ–Ω–æ–º `TOK`
2. **–ü—Ä–æ–º–ø—Ç—ã**: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç `TOK, ohwx_rubber_tile <s0><s1>, 100% red`
3. **–¶–≤–µ—Ç–∞**: –¢–æ—á–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–º —Ü–≤–µ—Ç–∞–º
4. **–ö–∞—á–µ—Å—Ç–≤–æ**: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞–∫ –≤ –æ–±—É—á–µ–Ω–∏–∏
5. **–ß–∏—Å—Ç–æ—Ç–∞**: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π

### üìä –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫ `state_dict`
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `TOK, `
- ‚úÖ –¢–æ—á–Ω—ã–µ —Ü–≤–µ—Ç–∞ –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö
- ‚úÖ –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è —Ç–µ–∫—Å—Ç—É—Ä–∞ —Ä–µ–∑–∏–Ω–æ–≤–æ–π –ø–ª–∏—Ç–∫–∏
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –º–∏–≥—Ä–∞—Ü–∏–∏ –∫—ç—à–∞

---

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–°–±–æ—Ä–∫–∞**: `cog build`
2. **–ü—É–±–ª–∏–∫–∞—Ü–∏—è**: `cog push`
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
4. **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –æ–±—É—á–µ–Ω–∏—è

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### üîç –ê–Ω–∞–ª–∏–∑ —Ñ–∞–π–ª–æ–≤ –æ–±—É—á–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏:
–ò–∑ `replicate-prediction-4/attributes.txt`:
```
"token_dict": {
  "TOK": "<s0><s1>"
}
```

–ò–∑ `replicate-prediction-4/special_params.json`:
```json
{
    "TOK": "<s0><s1>"
}
```

### üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–º–ø—Ç–æ–≤ –æ–±—É—á–µ–Ω–∏—è:
```
"TOK, ohwx_rubber_tile <s0><s1>, 100% red"
"TOK, ohwx_rubber_tile <s0><s1>, 30% red, 70% blue"
```

–≠—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –º–æ–¥–µ–ª—å –±—ã–ª–∞ –æ–±—É—á–µ–Ω–∞ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `TOK, ` –∏ –µ–¥–∏–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º `TOK`.

### üîç –ê–Ω–∞–ª–∏–∑ –æ—à–∏–±–∫–∏ Textual Inversion:
–û—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –∏–∑-–∑–∞ –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã `<s0>` –∏ `<s1>` –≤–º–µ—Å—Ç–æ –µ–¥–∏–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ `TOK`.

---

*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: 25 –¥–µ–∫–∞–±—Ä—è 2024*  
*–í–µ—Ä—Å–∏—è: v4.3.39 "TOK PREFIX & TI FIX"*  
*–°—Ç–∞—Ç—É—Å: –ì–æ—Ç–æ–≤ –∫ —Å–±–æ—Ä–∫–µ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é*
