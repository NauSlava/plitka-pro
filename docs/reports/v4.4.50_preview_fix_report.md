# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –ø—Ä–µ–≤—å—é –≤–æ –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ v4.4.50

**–î–∞—Ç–∞**: 2025-09-01  
**–í–µ—Ä—Å–∏—è**: v4.4.50  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ  

## –ü—Ä–æ–±–ª–µ–º–∞ v4.4.49

### –ê–Ω–∞–ª–∏–∑ –ø–∞–ø–∫–∏ `run_20250901_174658`
–ò–∑ –∞–Ω–∞–ª–∏–∑–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤—ã—è–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **‚ùå –ü—Ä–µ–≤—å—é –ø–æ—è–≤–ª—è–ª–æ—Å—å —Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Ü–µ**: Callback —Ä–∞–±–æ—Ç–∞–ª –∏ —Å–æ—Ö—Ä–∞–Ω—è–ª –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –ø—Ä–µ–≤—å—é, –Ω–æ –æ–Ω–∏ –Ω–µ –ø–æ–ø–∞–¥–∞–ª–∏ –≤ outputs
2. **‚ùå –ß–µ—Ä–Ω—ã–µ –∫–≤–∞–¥—Ä–∞—Ç—ã**: –í–º–µ—Å—Ç–æ –ø—Ä–µ–≤—å—é –≤ outputs –ø–æ–ø–∞–¥–∞–ª–∏ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ pipeline, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —á–µ—Ä–Ω—ã–º–∏ –∫–≤–∞–¥—Ä–∞—Ç–∞–º–∏
3. **‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥**: `preview.png` —Å–æ–¥–µ—Ä–∂–∞–ª colormap, `final.png` –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª, `out_6.png` —Å–æ–¥–µ—Ä–∂–∞–ª —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

### –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏:
```
INFO:predict:üü° PREVIEW_READY /tmp/preview_01.png
INFO:predict:üü° PREVIEW_READY /tmp/preview_02.png
...
INFO:predict:üü° PREVIEW_READY /tmp/preview_06.png
```

–ù–æ —ç—Ç–∏ —Ñ–∞–π–ª—ã –Ω–µ –ø–æ–ø–∞–¥–∞–ª–∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π pipeline outputs.

## –†–µ—à–µ–Ω–∏–µ v4.4.50

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
1. **‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω callback**: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –ø—Ä–µ–≤—å—é –∫–∞–∂–¥—ã–µ ~1/6 —à–∞–≥–æ–≤
2. **‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥**: –í–º–µ—Å—Ç–æ –≤—Å–µ—Ö –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –ø—Ä–µ–≤—å—é –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–∞–∫ `preview.png`
3. **‚úÖ –£–±—Ä–∞–Ω—ã —á–µ—Ä–Ω—ã–µ –∫–≤–∞–¥—Ä–∞—Ç—ã**: –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –ø—Ä–µ–≤—å—é –±–æ–ª—å—à–µ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ outputs

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### `predict.py`
```python
# –î–û (v4.4.49) - –ü–†–û–ë–õ–ï–ú–ê:
# –°–Ω–∞—á–∞–ª–∞ –æ—Ç–¥–∞—ë–º –≤—Å–µ –ø—Ä–µ–≤—å—é (–µ—Å–ª–∏ –µ—Å—Ç—å), –∑–∞—Ç–µ–º —Ñ–∏–Ω–∞–ª
for p in preview_paths:
    yield p
yield Path(final_path)
yield Path(colormap_path)

# –ü–û–°–õ–ï (v4.4.50) - –ò–°–ü–†–ê–í–õ–ï–ù–û:
# –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ñ–∞–π–ª—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ: –ø—Ä–µ–≤—å—é, —Ñ–∏–Ω–∞–ª, colormap
# –ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –ø—Ä–µ–≤—å—é, –±–µ—Ä–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–∞–∫ preview.png
if preview_paths:
    # –ö–æ–ø–∏—Ä—É–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø—Ä–µ–≤—å—é –∫–∞–∫ preview.png
    preview_path = "/tmp/preview.png"
    try:
        import shutil
        shutil.copy2(preview_paths[-1], preview_path)
        logger.info(f"üü° PREVIEW_READY {preview_path}")
    except Exception as e:
        logger.warning(f"‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–≤—å—é: {e}")
        # –°–æ–∑–¥–∞–µ–º –ø—É—Å—Ç–æ–µ –ø—Ä–µ–≤—å—é
        Image.new('RGB', (512, 512), color='white').save(preview_path)
else:
    # –ï—Å–ª–∏ –ø—Ä–µ–≤—å—é –Ω–µ —Å–æ–∑–¥–∞–ª–∏—Å—å, —Å–æ–∑–¥–∞–µ–º –∏–∑ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    preview_path = "/tmp/preview.png"
    try:
        preview_image = final_image.resize((512, 512), Image.Resampling.LANCZOS)
        preview_image.save(preview_path)
        logger.info(f"üü° PREVIEW_READY {preview_path}")
    except Exception as e:
        logger.warning(f"‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –ø—Ä–µ–≤—å—é: {e}")
        Image.new('RGB', (512, 512), color='white').save(preview_path)

yield Path(preview_path)
yield Path(final_path)
yield Path(colormap_path)
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –£—Å–ø–µ—à–Ω–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è
- **–ú–æ–¥–µ–ª—å**: v4.4.50
- **–°—Å—ã–ª–∫–∞**: https://replicate.com/nauslava/plitka-pro-project:v4.4.50
- **–°—Ç–∞—Ç—É—Å**: –ì–æ—Ç–æ–≤–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
1. **–ü—Ä–µ–≤—å—é –≤–æ –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
2. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥**: `preview.png` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–µ–≤—å—é, `final.png` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —á–µ—Ä–Ω—ã—Ö –∫–≤–∞–¥—Ä–∞—Ç–æ–≤**: –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –ø—Ä–µ–≤—å—é –±–æ–ª—å—à–µ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ outputs
4. **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: –¢–æ–ª—å–∫–æ 3 —Ñ–∞–π–ª–∞: `preview.png`, `final.png`, `colormap.png`

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –ø—Ä–æ—Å—Ç—ã–º –ø—Ä–æ–º–ø—Ç–æ–º:
```json
{"prompt": "100% white"}
```

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
- ‚úÖ –ü—Ä–µ–≤—å—é –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (–Ω–µ –≤ –∫–æ–Ω—Ü–µ)
- ‚úÖ `preview.png` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–µ–≤—å—é (–Ω–µ colormap)
- ‚úÖ `final.png` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- ‚úÖ `colormap.png` —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–∞—Ä—Ç—É —Ü–≤–µ—Ç–æ–≤
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —á–µ—Ä–Ω—ã—Ö –∫–≤–∞–¥—Ä–∞—Ç–æ–≤ –≤ outputs

## –£—Ä–æ–∫–∏

1. **Callback vs Outputs**: Callback –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ —Ñ–∞–π–ª—ã –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ outputs
2. **–ú–∞–ø–ø–∏–Ω–≥ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**: –í–∞–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –º–∞–ø–ø–∏—Ç—å —Ñ–∞–π–ª—ã –ø–æ –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—é
3. **–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã**: –ù–µ –≤—Å–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã –ø–æ–ø–∞–¥–∞—Ç—å –≤ outputs
4. **Fallback –ª–æ–≥–∏–∫–∞**: –í—Å–µ–≥–¥–∞ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å fallback –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–µ–≤—å—é
