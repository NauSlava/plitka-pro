# cog.yaml
# Version: v4.5.06 - RUBBER TILE GENERATION MODEL (Critical Fixes & Organic Granules)
# Description: Модель для генерации изображений резиновой плитки с критическими исправлениями и органическими гранулами
# Changes:
# - КРИТИЧЕСКОЕ: Исправлена ошибка broadcast в валидации colormap
# - КРИТИЧЕСКОЕ: Заменен дефектный аварийный механизм на случайное распределение точек
# - КРИТИЧЕСКОЕ: Добавлен механизм прерывания по критическим ошибкам
# - КРИТИЧЕСКОЕ: Усилено влияние ControlNet (1.0-1.1 вместо 0.7-0.9)
# - КРИТИЧЕСКОЕ: Исправлен алгоритм granular паттерна с точным подсчетом пикселей
# - КРИТИЧЕСКОЕ: Добавлено усиление токенов цветов для предотвращения потери attention mechanism
# - НОВОЕ: Динамические размеры гранул (2-8 пикселей) вместо фиксированных
# - НОВОЕ: Органические формы гранул с вариативностью и искажениями
# - НОВОЕ: Калибровка параметров на основе референсных изображений
# - НОВОЕ: Валидация ControlNet карт перед передачей в ControlNet

build:
  gpu: true
  cuda: "12.1"
  python_version: "3.11"
  python_requirements: "requirements.txt"
  system_packages:
    - "libgl1-mesa-glx"
    - "libglib2.0-0"
  cog_runtime: true

predict: "predict.py:Predictor"

image: "r8.im/nauslava/plitka-pro-project:v4.5.06"